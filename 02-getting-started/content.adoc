= Getting Started

è‘—è€…: 5t111111

// tag::body[]

ã€Œã¯ã˜ã‚ã«ã€ã®ç« ã§èª¬æ˜Žã—ãŸã‚ˆã†ã«ã€ Crystal ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨€èªžãªã®ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ç« ã§ã¯ã¾ãšã€ Crystal ã‚’å®Ÿéš›ã«ä½¿ã£ã¦ã„ããŸã‚ã®æ§˜ã€…ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ãã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ããŸã‚ã«å¤§äº‹ãªã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ã‚„ã€ Web ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ Crystal ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã®ã§ãã‚‹ Playground ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚

== Crystal ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Crystal ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ OS ã”ã¨ã«ç•°ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ã€ä¸»è¦ãª Linux ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ macOS ã€ãã—ã¦ Windows ã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

=== Debian ã‚„ Ubuntu

Debian ç³»ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ Crystal ã®å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã®ãŸã‚ã«ã€ã¾ãš APT ã®æ§‹æˆã«ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

[source,console]
----
$ curl -sSL https://dist.crystal-lang.org/apt/setup.sh | sudo bash
----

ã“ã‚Œã«ã‚ˆã‚Šãƒªãƒã‚¸ãƒˆãƒªãŒæ§‹æˆã•ã‚Œã‚­ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¾ã™ã€‚ã‚‚ã—ä¸Šè¨˜ã‚’è‡ªåˆ†è‡ªèº«ã§è¨­å®šã™ã‚‹ã®ãŒãŠå¥½ã¿ã®å ´åˆã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã‚‚åŒã˜ã“ã¨ãŒã§ãã¾ã™ã€‚

[source,console]
----
$ curl -sL "https://keybase.io/crystal/pgp_keys.asc" | sudo apt-key add -
$ echo "deb https://dist.crystal-lang.org/apt crystal main" | sudo tee /etc/apt/sources.list.d/crystal.list
$ sudo apt-get update
----

ãƒªãƒã‚¸ãƒˆãƒªã‚’æ§‹æˆã—ãŸã‚‰ä»¥ä¸‹ã§ Crystal ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

[source,console]
----
$ sudo apt install crystal
----

ä»¥ä¸‹ã«è¨˜è¼‰ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©Ÿèƒ½ã‚’ä½¿ã†ä¸Šã§å¿…è¦ã¨ãªã‚‹ãŸã‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚’æŽ¨å¥¨ã—ã¾ã™ã€‚

[source,console]
----
$ sudo apt install libssl-dev      # OpenSSL ã«å¿…è¦ã§ã™
$ sudo apt install libxml2-dev     # XML ã«å¿…è¦ã§ã™
$ sudo apt install libyaml-dev     # YAML ã«å¿…è¦ã§ã™
$ sudo apt install libgmp-dev      # Big numbers ã«å¿…è¦ã§ã™
$ sudo apt install libreadline-dev # Readline ã«å¿…è¦ã§ã™
----

ãªãŠã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Crystal ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸå ´åˆã¯ä»¥ä¸‹ã§ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[source,console]
----
$ sudo apt update
$ sudo apt install crystal
----

=== Red Hat ã‚„ CentOS

Red Hat ç³»ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚‚ã€ Crystal ã®å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãš YUM ã®æ§‹æˆã«ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

[source,console]
----
$ curl https://dist.crystal-lang.org/rpm/setup.sh | sudo bash
----

ã“ã‚Œã§ãƒªãƒã‚¸ãƒˆãƒªãŒæ§‹æˆã•ã‚Œã‚­ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¾ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã€åŒæ§˜ã®ã“ã¨ã‚’æ‰‹å‹•ã§è¡Œã†ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

[source,console]
----
$ rpm --import https://dist.crystal-lang.org/rpm/RPM-GPG-KEY

$ cat > /etc/yum.repos.d/crystal.repo <<END
$ [crystal]
$ name = Crystal
$ baseurl = https://dist.crystal-lang.org/rpm/
$ END
----

ãƒªãƒã‚¸ãƒˆãƒªã‚’æ§‹æˆã—ãŸã‚‰ä»¥ä¸‹ã§ Crystal ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

[source,console]
----
$ sudo yum install crystal
----

ãªãŠã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Crystal ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸå ´åˆã¯ä»¥ä¸‹ã§ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[source,console]
----
$ sudo yum update crystal
----

=== Arch Linux

Arch Linux ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ Crystal ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã® `shards` ã‚‚å¿…è¦ã«ãªã‚‹ã®ã§åŒæ§˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

[source,console]
----
$ sudo pacman -S crystal shards
----

=== Gentoo Linux

Gentoo Linux ã§ã¯ã€ãƒ¡ã‚¤ãƒ³ã® overlay ã« Crystal ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã§æ§‹æˆã®ãƒ•ãƒ©ã‚°ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[source,console]
----
# equery u dev-lang/crystal
[ Legend : U - final flag setting for installation]
[        : I - package is installed with flag     ]
[ Colors : set, unset                             ]
 * Found these USE flags for dev-lang/crystal-0.18.7:
 U I
 - - doc      : Add extra documentation (API, Javadoc, etc). It is recommended to enable per package instead of globally
 - - examples : Install examples, usually source code
 + + xml      : Use the dev-libs/libxml2 library to enable Crystal xml module
 + - yaml     : Use the dev-libs/libyaml library to enable Crystal yaml module
----

ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

[source,console]
----
$ su -
# emerge -a dev-lang/crystal
----

=== macOS

macOS ã§ã¯ã€ http://brew.sh/[Homebrew] ã‚’åˆ©ç”¨ã—ã¦ç°¡å˜ã« Crystal ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[source,console]
----
$ brew update
$ brew install crystal
----

ãªãŠã€macOS ã§ Crystal ã‚’ä½¿ã†ã¨ãã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã«é­é‡ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

[source,console]
----
ld: library not found for -levent
----

ãã®å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸä¸Šã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ„ãƒ¼ãƒ«ãƒã‚§ã‚¤ãƒ³ã‚’é¸æŠžã—ç›´ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

[source,console]
----
$ xcode-select --install
$ xcode-select --switch /Library/Developer/CommandLineTools
----

=== Linuxbrew

http://linuxbrew.sh/[Linuxbrew] ã‚’ä½¿ã£ã¦ Linux ã« Crystal ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

[source,console]
----
$ brew update
$ brew install crystal-lang
----

ã‚‚ã— Crystal ã®è¨€èªžè‡ªä½“ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ã«ã‚‚èˆˆå‘³ãŒã‚ã‚‹ã®ã§ã‚ã‚Œã°ã€åŒæ™‚ã« LLVM ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚ãã®å ´åˆã¯ä¸Šè¨˜ã®2è¡Œç›®ã‚’ä»¥ä¸‹ã«å¤‰æ›´ã—ã¾ã™ã€‚

[source,console]
----
$ brew install crystal-lang --with-llvm
----

=== Windows

æ®‹å¿µãªãŒã‚‰ã€ã¾ã  Crystal ã¯ Windows ã§ã®å®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚ã§ã™ãŒã€ https://docs.microsoft.com/en-us/windows/wsl/about[Windows Subsystem for Linux] ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ Windows 10 ä¸Šã§ Crystal ã‚’ä½¿ã†ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

WSL ä¸Šã§ã® Crystal ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ã€ãã‚Œãžã‚Œã® Linux ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¨åŒæ§˜ã§ã™ã€‚ä¾‹ãˆã°ã€ã‚‚ã— WSL ã« Ubuntu ã‚’å°Žå…¥ã—ãŸã®ã§ã‚ã‚Œã°ã€å‰æŽ²ã®ã€Œ Debian ã‚„ Ubuntu ã€ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

=== ãã®ä»–ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

ã“ã“ã¾ã§ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã”ã¨ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’èª¬æ˜Žã—ã¾ã—ãŸãŒã€è‡ªåˆ†ã®ä½¿ã£ã¦ã„ã‚‹ç’°å¢ƒãŒå¯¾å¿œã—ã¦ã„ãªã„å ´åˆã‚„ã€ã‚ˆã‚Šæœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã„ãŸã„å ´åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚å…¥é–€æ›¸ã®ç¯„å›²ã‚’è¶…ãˆã¦ã—ã¾ã†ãŸã‚ã€è©³ç´°ã«ã¤ã„ã¦ã¯ãƒªãƒ³ã‚¯å…ˆã‚’ã”è¦§ãã ã•ã„ã€‚

- https://crystal-lang.org/docs/installation/from_a_targz.html[tar ãƒœãƒ¼ãƒ«ã‹ã‚‰ã®ãƒã‚¤ãƒŠãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«]
- https://crystal-lang.org/docs/installation/from_source_repository.html[ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®ãƒ“ãƒ«ãƒ‰]

== Hello Crystal

=== ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ç¢ºèª

Crystal ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ããŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã§ã€Crystal ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦åˆ©ç”¨ã§ãã‚‹çŠ¶æ…‹ã‹ã©ã†ã‹ãŒç¢ºèªã§ãã¾ã™ã€‚

[source,console]
.`hello.cr`
----
$ crystal -v
----

æ­£å¸¸ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆã€

[source,console]
----
Crystal 0.26.1 (2018-08-27)
----

ã¨ã„ã£ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚‚ã—ã€Œã‚³ãƒžãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã€ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€

- Crystal ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãªã„ã‹
- Crystal ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´æ‰€ã«ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ã‚‹ã‹

ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

=== ã¯ã˜ã‚ã¦ã® Crystal ãƒ—ãƒ­ã‚°ãƒ©ãƒ 

ç„¡äº‹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ãˆã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ãŸã‚‰ã€ã¯ã˜ã‚ã¦ã® Crystal ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã”å¤šåˆ†ã«æ¼ã‚Œãšã€ã“ã“ã§ã‚‚æœ€åˆã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€Œ Hello world ã€ã¨ã—ã¾ã™ã€‚

å¥½ããªã‚¨ãƒ‡ã‚£ã‚¿ã§ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ `hello.cr` ã¨ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚Crystal ã®æ‹¡å¼µå­ã¯ `.cr` ã§ã™ã€‚

[source,crystal]
----
puts "Hello world!"
----

ãã‚Œã§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

[source,console]
----
$ crystal hello.cr
----

å®Ÿè¡Œã—ã¦ã€

[source,console]
----
Hello world!
----

ã¨è¡¨ç¤ºã•ã‚ŒãŸã‚‰æˆåŠŸã§ã™ï¼

Crystal ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨€èªžã§ã™ãŒã€ã“ã®ã‚ˆã†ã«1ã¤ã®ã‚³ãƒžãƒ³ãƒ‰ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¨å®Ÿè¡Œã‚’åŒæ™‚ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

[source,console]
----
$ crystal run hello.cr
----

ã¨å®Ÿè¡Œã—ã¦ã‚‚åŒæ§˜ã§ã™ã€‚

== Crystal ã‚’æ›¸ããŸã‚ã®ã‚¨ãƒ‡ã‚£ã‚¿

ã•ã¦ã€ã“ã‚Œã§ Crystal ã‚’æ›¸ããŸã‚ã®æº–å‚™ãŒæ•´ã£ãŸã®ã§ã€æ¬¡ã®ç« ã‹ã‚‰ã¯æ–‡æ³•ãªã©å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ããŸã‚ã®å†…å®¹ã«å…¥ã£ã¦ã„ãã¾ã™ã€‚ã§ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å¿«é©ã«æ›¸ããŸã‚ã«ã¯ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚‚æ¬ ã‹ã›ã¾ã›ã‚“ã€‚

ã“ã®ç« ã§ã¯æœ€å¾Œã«ã€ä»¥ä¸‹ã®ä»£è¡¨çš„ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚¨ãƒ‡ã‚£ã‚¿ã® Crystal ã‚µãƒãƒ¼ãƒˆã®çŠ¶æ³ã«ã¤ã„ã¦ç°¡å˜ã«ç´¹ä»‹ã—ã¾ã™ã€‚

- Visual Studio Code
- Atom
- Vim
- Emacs

=== Visual Studio Code

Visual Studio Codeã€é€šç§° VSCode ã¯æ©Ÿèƒ½ã®è±Šå¯Œã•ã¨ã‚·ãƒ³ãƒ—ãƒ«ã•è»½ã•ã‚’ä¸¡ç«‹ã—ãŸã‚¨ãƒ‡ã‚£ã‚¿ã¨ã—ã¦ã¨ã¦ã‚‚äººæ°—ã®ã‚¨ãƒ‡ã‚£ã‚¿ã§ã™ã€‚

VSCode ã§ Crystal ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã«ã¯ã„ãã¤ã‹ç¨®é¡žãŒã‚ã‚Šã¾ã™ãŒã€ç¾åœ¨æœ€ã‚‚æ´»ç™ºã«é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã®ã¯ Crystal Language ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚GitHub ä¸Šã§ã¯ https://github.com/crystal-lang-tools/vscode-crystal-lang[crystal-lang-tools/vscode-crystal-lang] ã¨ã„ã†ãƒªãƒã‚¸ãƒˆãƒªã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã® Crystal Language ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã ã‘ã§ã€

- ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ
- è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ
- è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
- ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥
- å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—

ãªã©ã®æ©Ÿèƒ½ãŒã™ãã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

vscode-crystal-lang ã® GitHub ä¸Šã® Wiki ã«ã¯ã‚ˆã‚Šè©³ã—ã„è¨­å®šãªã©ã®æƒ…å ±ã‚‚è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚¨ãƒ©ãƒ¼ã®æ¤œçŸ¥ãƒ¬ãƒ™ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºã—ãŸã‚Šã€ https://github.com/crystal-lang-tools/scry[scry] ã¨ã„ã† Crystal ã® Language Server ã¨ã®é€£æºãªã©ã®ã‚ˆã‚Šä¾¿åˆ©ã«ä½¿ã†ãŸã‚ã®è¨­å®šã‚‚æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã®ã§åˆã‚ã›ã¦ã”è¦§ãã ã•ã„ã€‚

=== Atom

GitHub ç¤¾è£½ã®ã‚¨ãƒ‡ã‚£ã‚¿ Atom ã§ã¯ã€ä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°Žå…¥ã™ã‚‹ã“ã¨ã§å¿«é©ã« Crystal ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒã§ãã¾ã™ã€‚

- https://github.com/crystal-lang-tools/language-crystal[crystal-lang-tools/language-crystal]
- https://github.com/crystal-lang-tools/atom-ide-crystal[crystal-lang-tools/atom-ide-crystal]

language-crystal ã¯ Atom ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã¯ language-crystal-actual ã¨ã„ã†åå‰ã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã€€ã“ã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ Crystal ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚„è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚

atom-ide-crystal ã¯ã€ å‰ç¯€ã§ã‚‚è§¦ã‚ŒãŸ scry ã¨ã„ã† Language Server ã¨é€£æºã—ã¦ IDE ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã¾ã æ©Ÿèƒ½çš„ã«ã¯å……å®Ÿã—ã¦ã„ãªã„é¢ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãªã©å°‘ã—ãšã¤é–‹ç™ºãŒé€²ã‚“ã§ã„ã¾ã™ã€‚

=== Vim

è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸ Vim ã§ã‚‚ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†ã“ã¨ã§ Crystal ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://github.com/rhysd/vim-crystal[rhysd/vim-crystal] ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ Crystal ã® filetype ãŒè¿½åŠ ã•ã‚Œã€ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚„è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

ã¾ãŸã€vim-crystal ã«ã¯ Crystal ã®çµ„ã¿è¾¼ã¿ãƒ„ãƒ¼ãƒ« `crystal tool` ã‚„ Spec ã¨ã®é€£æºãªã©ã®ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã‚ã‚Šã€ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã—ã‚„ã™ããªã£ã¦ã„ã¾ã™ã€‚

ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ã‚’ã—ãŸã„å ´åˆã«ã¯ã€ https://github.com/vim-syntastic/syntastic[vim-syntastic/syntastic] ãªã©ã®çµ±åˆè§£æžãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°Žå…¥ãŒå¿…è¦ã§ã™ã€‚å‰è¿°ã® vim-crystal ã«ã¯ã“ã® syntastic ç”¨ã®ãƒã‚§ãƒƒã‚«ã‚‚ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ç‰¹åˆ¥ãªè¨­å®šã‚’ã›ãšã¨ã‚‚åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

=== Emacs

Emacs ã§ Crystal ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãå ´åˆã¯ https://github.com/crystal-lang-tools/emacs-crystal-mode[crystal-lang-tools/emacs-crystal-mode] ã‚’ä½¿ã†ã®ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°Žå…¥ã™ã‚‹ã¨ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚„è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã€å®šç•ªã®ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ« flycheck ã«ã‚‚ Crystal ã®ã‚µãƒãƒ¼ãƒˆãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚

emacs-crystal-mode ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ https://melpa.org/#/crystal-mode[MELPA] ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã®ã§å°Žå…¥ã‚‚ç°¡å˜ã§ã™ã€‚

== Crystal Playground

Crystal Playground ã‚’ä½¿ã†ã¨ Web ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ Crystal ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

image::02-crystal-playground.png[width=75%]

ã“ã®ç”»åƒã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚‹ã‚ˆã†ã«ã€ Playground ã§ã¯ã€

- å®Ÿè¡Œçµæžœ
- åž‹æƒ…å ±

ãªã©ã‚’åŒæ™‚ã«è¡¨ç¤ºã—ãªãŒã‚‰æ‰‹è»½ã« Crystal ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚

Playground ã¯ Crystal ã«åŒæ¢±ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€Crystal ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚Œã°ã€

[source,console]
----
$ crystal play
----

ã¨å®Ÿè¡Œã™ã‚‹ã ã‘ã§ Playground ã‚µãƒ¼ãƒãŒç«‹ã¡ä¸ŠãŒã‚Šã€ã™ãã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒãƒ¼ãƒˆ 8080 ã§èµ·å‹•ã™ã‚‹ã®ã§ã€ãŠæ°—ã«å…¥ã‚Šã® Web ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:8080 ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚ãƒãƒ¼ãƒˆã¯ `-p` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºå¯èƒ½ã§ã™ã€‚

Playground ã‚’ç«‹ã¡ä¸Šã’ã¦ãŠã‘ã°ã€æœ¬æ›¸ã‚’èª­ã¿é€²ã‚ã‚‹ã¨ãã«ã€è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ãã®å ´ã§å®Ÿè¡Œã—ã¦è©¦ã—ãŸã„ã¨ãã«ã‚‚ä¾¿åˆ©ã«æ´»ç”¨ã§ãã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚

ã¾ãŸã€Playground ã«ã¯ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã«ç•™ã¾ã‚‰ãªã„è‰²ã€…ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯æ”¹ã‚ã¦å¾Œã®ç« ã§ç´¹ä»‹ã—ã¾ã™ã€‚

== ã¾ã¨ã‚

ã“ã®ç« ã§ã¯ã€Crystal ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¨ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ã€ãã—ã¦ Playground ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚ã¾ã ç™ºå±•é€”ä¸Šã§ã‚ã‚Šå…¥é–€æ›¸ã®ç¯„å›²ã‚’è¶…ãˆã¦ã—ã¾ã†ã®ã§ã“ã“ã§ã¯è¨˜è¼‰ã—ã¾ã›ã‚“ãŒã€ ã‚‚ã— Crystal ã«æ…£ã‚Œã¦ããŸã‚‰ã‚¨ãƒ‡ã‚£ã‚¿ã¨é€£æºã—ãŸãƒ‡ãƒãƒƒã‚°æ–¹æ³•ãªã©ã‚‚èª¿ã¹ã¦ã¿ã‚‹ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚

æ¬¡ã®ç« ã§ã¯ Crystal ã®æ§‹æ–‡ã«ã¤ã„ã¦èª¬æ˜Žã—ã¾ã™ã€‚

// end::body[]
