<!DOCTYPE HTML>
<!--
Prologue by HTML5 UP
html5up.net | @ajlkn
Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
Jekyll integration by Chris Bobbe | chrisbobbe.github.io
-->
<html><head><!-- Robots -->
  <meta name="robots" content="index, follow" /><link rel="canonical" href="/introducing-crystal/chapters/07-cli-development.html" /><!-- Title, description, author --><title>07. CLI 開発 | Introducing Crystal Programming Language - Your awesome subtitle</title>
  <meta name="description" content="『Introducing Crystal Programming Language』はプログラミング言語 Crystal の初心者〜中級者向け解説書です。" />
  <meta name="author" content="Crystal-JP" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="07. CLI 開発 | Introducing Crystal Programming Language - Your awesome subtitle" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/introducing-crystal/assets/images/avatar.png" />
  <meta property="og:url" content="/introducing-crystal/chapters/07-cli-development.html" />
  <meta property="og:site_name" content="Introducing Crystal Programming Language" />
  <meta property="og:description" content="『Introducing Crystal Programming Language』はプログラミング言語 Crystal の初心者〜中級者向け解説書です。" />
  
  <!-- Styles -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--[if lte IE 8]><script src="/introducing-crystal/assets/js/ie/html5shiv.js" defer></script><![endif]-->
  <link rel="stylesheet" href="/introducing-crystal/assets/css/main.css" />
  <!--[if lte IE 8]><link rel="stylesheet" href="/introducing-crystal/assets/css/ie8.css" /><![endif]-->
  <!--[if lte IE 9]><link rel="stylesheet" href="/introducing-crystal/assets/css/ie9.css" /><![endif]-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css">

  <!-- Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" defer></script>
  <script src="/introducing-crystal/assets/js/jquery.scrolly.min.js" defer></script>
  <script src="/introducing-crystal/assets/js/jquery.scrollzer.min.js" defer></script>
  <script src="/introducing-crystal/assets/js/skel.min.js" defer></script>
  <script src="/introducing-crystal/assets/js/util.js" defer></script>
  <!--[if lte IE 8]><script src="/introducing-crystal/assets/js/ie/respond.min.js" defer></script><![endif]-->
  <script src="/introducing-crystal/assets/js/main.js" defer></script>

</head><body><!-- Header -->
<div id="header">
  <div class="top"><!-- Logo -->
<div id="logo">
  <a href="/introducing-crystal/" id="home-link">
    <span class="image avatar48"><img src="/introducing-crystal/assets/images/avatar.png" alt="Avatar of Crystal-JP" /></span>
    <h1 id="title">Introducing Crystal Programming Language</h1>
    <p>Your awesome subtitle</p>
  </a>
</div><!-- Nav -->
<nav id="nav">
  <ul><li><a href="/introducing-crystal/" id="トップページ-link">
            <span class="icon fa-link">トップページ</span>
          </a></li><li><a href="/introducing-crystal/chapters/01-introduction.html" id="01-はじめに-link">
            <span class="icon fa-link">01. はじめに</span>
          </a></li><li><a href="/introducing-crystal/chapters/02-getting-started.html" id="02-getting-started-link">
            <span class="icon fa-link">02. Getting Started</span>
          </a></li><li><a href="/introducing-crystal/chapters/03-syntax.html" id="03-構文-link">
            <span class="icon fa-link">03. 構文</span>
          </a></li><li><a href="/introducing-crystal/chapters/06-web-development.html" id="06-web-開発-link">
            <span class="icon fa-link">06. Web 開発</span>
          </a></li><li><a href="/introducing-crystal/chapters/04-macro.html" id="04-マクロ-link">
            <span class="icon fa-link">04. マクロ</span>
          </a></li><li><a href="#" id="07-cli-開発" class="active">
            <span class="icon fa-link">07. CLI 開発</span>
          </a></li><li><a href="/introducing-crystal/chapters/05-shards.html" id="05-shards-link">
            <span class="icon fa-link">05. Shards</span>
          </a></li><li><a href="/introducing-crystal/authors.html" id="著者紹介-link">
            <span class="icon fa-link">著者紹介</span>
          </a></li></ul>
</nav></div>
  <div class="bottom"><!-- Social Icons -->
<ul class="icons"><li><a href="mailto:your-email@example.com" class="icon fa-envelope"><span class="label">Email</span></a></li></ul>
</div>
</div>
<!-- Main -->
<div id="main">
	<!-- Page -->
	<article class="shade-two">
	  <div class="container">
			<header>
				<h2>07. CLI 開発</h2></header><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#crystal-で-cli-ツール">Crystal で CLI ツール</a></li>
<li><a href="#自作の-echo-コマンド-myecho-を作る">自作の echo コマンド「 myecho 」を作る</a></li>
<li><a href="#バージョン表示のオプション-v-を実装する">バージョン表示のオプション <code>-v</code> を実装する</a></li>
<li><a href="#ヘルプ表示のオプション-h-help-を実装する">ヘルプ表示のオプション <code>-h</code> <code>--help</code> を実装する</a></li>
<li><a href="#prefix-を付ける-prefix-を実装する">prefix を付ける <code>--prefix</code> を実装する</a></li>
<li><a href="#サードパーティ製のライブラリを使う">サードパーティ製のライブラリを使う</a>
<ul class="sectlevel2">
<li><a href="#mrrooijencommander">mrrooijen/commander</a></li>
<li><a href="#jwaldripadmiral-cr">jwaldrip/admiral.cr</a></li>
<li><a href="#at-grandpaclim">at-grandpa/clim</a></li>
</ul>
</li>
<li><a href="#まとめ">まとめ</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>この章では Crystal での CLI 開発について書きます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="crystal-で-cli-ツール">Crystal で CLI ツール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Crystal で CLI ツールの開発をしていきましょう。Crystal で CLI ツールを書くメリットは次のようなものがあります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>コンパイルしてワンバイナリにできる</p>
</li>
<li>
<p>Ruby 風の syntax で雑に書ける</p>
</li>
<li>
<p>実行速度が早い</p>
</li>
<li>
<p>コンパイル時に型チェックが入る</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>CLI ツールは、欲しい時にサッと書けて継続的に使えるようにしたいですね。そういう意味では、 Crystal という選択肢は良いのではないでしょうか。今回初めて Crystal を触るという方も、まずは CLI ツールをサクッと作ってみることをおすすめします。では、早速作っていきましょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="自作の-echo-コマンド-myecho-を作る">自作の echo コマンド「 myecho 」を作る</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>echo</code> コマンドを模倣した <code>myecho</code> コマンドを作っていきましょう。まずは <code>crystal init app myecho</code> を実行してひな形を作ります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal init app myecho&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/.gitignore&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/.editorconfig&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/LICENSE&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/README.md&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/.travis.yml&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/shard.yml&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/src/myecho.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/src/myecho/version.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/spec/spec_helper.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>      create  myecho/spec/myecho_spec.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Initialized empty Git repository <span style="color: #000000;font-weight: bold">in</span> /path/to/myecho/.git/&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>次のようなファイルが作成されました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;tree&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span>.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>├── LICENSE&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>├── README.md&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>├── shard.yml&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>├── spec&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>│   ├── myecho_spec.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>│   └── spec_helper.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>└── src&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    ├── myecho&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    │   └── version.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    └── myecho.cr&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>3 directories, 7 files&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで準備は整いました。まずはテストを回してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>F&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failures:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  1<span style="color: #000000;font-weight: bold">)</span> MyEcho works&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     Failure/Error: false.should eq<span style="color: #000000;font-weight: bold">(</span><span style="color: #0086B3">true</span><span style="color: #000000;font-weight: bold">)</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>       Expected: <span style="color: #0086B3">true</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>            got: <span style="color: #0086B3">false</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;spec/myecho_spec.cr:7&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>73 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>1 examples, 1 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L17" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failed examples:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L18" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L19" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>crystal spec spec/myecho_spec.cr:6 <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;MyEcho works&lt;/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>テストは落ちます。ひな形生成時、 <code>spec/myecho_spec.cr</code> に失敗するテストが書かれているからです。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./s</span><span style="background-color: #f8f8f8">pec_helper</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"./../src/myecho.cr"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #303030"&gt;describe&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;  &lt;span style="color: #505050"&gt;# TODO: Write tests&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"works"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">false</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #aa759f"&gt;true&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>では、実際のテストから書いていきましょう。<code>myecho</code> の基本機能は「与えられた引数の文字列をそのまま出力する」です。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"run"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the content of args to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;           &lt;b class="conum"&gt;(1)&lt;/</span><span style="background-color: #f8f8f8">b</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;        &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">2</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"foo"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"bar"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">3</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"foo bar&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt; &lt;b class="conum"&gt;(4)&lt;/b&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>出力する先の <code>IO</code> インスタンスを生成します。テスト時は <code>IO::Memory</code> に出力します。</p>
</li>
<li>
<p><code>MyEcho::Cli</code> に <code>io</code> を渡し、インスタンスを生成します。</p>
</li>
<li>
<p><code>MyEcho::Cli#run</code> に、コマンドライン引数の <code>ARGV</code> を模した <code>["foo", "bar"]</code> を渡して実行します。</p>
</li>
<li>
<p><code>io</code> に出力された文字列を検証します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>まだ実装が終わっていないので、このテストは落ちます。実装側も書きましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho</span><span style="color: #000000;font-weight: bold">/*</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L3</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#aa759f"&gt;module&lt;/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;    &lt;span style="color: #aa759f"&gt;def&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">initialize</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">STDOUT</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">1</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L6"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;    &lt;span style="color: #aa759f"&gt;def&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>                     <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">2</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;args&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">3</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>インスタンス変数 <code>@io</code> を定義します。初期値は <code>STDOUT</code> です。</p>
</li>
<li>
<p><code>#run</code> を定義します。</p>
</li>
<li>
<p><code>@io</code> に引数 <code>args</code> を出力します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>書けたらテストを回しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span>.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>66 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>1 examples, 0 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>通りました。これで、受け取った引数をそのまま出力するメソッド <code>#run</code> を実装できました。次は build してバイナリを作りましょう。</p>
</div>
<div class="paragraph">
<p>まずは build 対象のファイルを作ります。<code>src/myecho.cr</code> で <code>#run</code> を呼び出して直接 build してもよいですが、そうするとテスト時にも <code>#run</code> が実行されてしまいます。それを避けるために <code>cli.cr</code> ファイルを別途作成し、 <code>myecho.cr</code> を require しましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/cli.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L3</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#f4bf75"&gt;MyEcho&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/span&gt;&lt;span style="color: #f4bf75"&gt;Cli&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/span&gt;&lt;span style="color: #303030"&gt;new&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/span&gt;&lt;span style="color: #303030"&gt;run&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/span&gt;&lt;span style="color: #f4bf75"&gt;ARGV&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/span&gt;&lt;/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>これで、モジュールと build ファイルを分離できました。早速 build してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">mkdir</span> &lt;/span&gt;bin&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal build &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-o</span>&lt;/span&gt; ./bin/myecho ./src/cli.cr&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>./bin/</code> ディレクトリを作成し、その中に <code>myecho</code> という名前でバイナリを出力しています。<code>myecho</code> を実行してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho Hello!! World!!&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Hello!! World!!&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>出力されました！CLI ツールの完成です！いろいろ出力して遊んでみてください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho HAHAHA!&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>HAHAHA!&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="バージョン表示のオプション-v-を実装する">バージョン表示のオプション <code>-v</code> を実装する</h2>
<div class="sectionbody">
<div class="paragraph">
<p>さらに CLI ツールらしくしていきましょう。バージョンを表示させる <code>-v</code> オプションを実装します。オプションがあると一気に CLI ツールらしくなりますね。Crystal には <code>OptionParser</code> というクラスが用意されています。コマンドラインオプションを扱うのに便利なクラスです。今回は <code>OptionParser</code> の使い方も解説しつつ実装していきます。まずはテストから書きましょう。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the version to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-v'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;                      &lt;b class="conum"&gt;(1)&lt;/</span><span style="background-color: #f8f8f8">b</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>             <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">2</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>                       <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">3</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L6"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt; &lt;b class="conum"&gt;(4)&lt;/b&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>出力する先の <code>IO</code> インスタンスを生成します。テスト時は <code>IO::Memory</code> に出力します。</p>
</li>
<li>
<p><code>MyEcho::Cli</code> に <code>io</code> を渡し、インスタンスを生成します。</p>
</li>
<li>
<p>version を表示するコマンドライン引数 <code>["-v"]</code> を渡して実行します。</p>
</li>
<li>
<p><code>MyEcho::VERSION</code> が表示されていることを検証します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テストを回しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>..F&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failures:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  1<span style="color: #000000;font-weight: bold">)</span> MyEcho MyEcho::Cli run writes the version to specified IO with <span style="color: #d14">'-v'</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     Failure/Error: io.to_s.should eq MyEcho::VERSION + <span style="color: #d14">"</span><span style="color: #d14">\n</span><span style="color: #d14">"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>       Expected: <span style="color: #d14">"0.1.0</span><span style="color: #d14">\n</span><span style="color: #d14">"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>            got: <span style="color: #d14">"-v</span><span style="color: #d14">\n</span><span style="color: #d14">"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;spec/myecho_spec.cr:18&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>117 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>3 examples, 1 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L17" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L18" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failed examples:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L19" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L20" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>crystal spec spec/myecho_spec.cr:14 <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;MyEcho MyEcho::Cli run writes the version to specified IO with &lt;span style="color: #90a959"&gt;'-v'&lt;/span&gt;&lt;/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>0.1.0</code> が期待されていますが <code>-v</code> が出力されていますね。これは期待通りの落ち方です。では実装に入りましょう。単純に「 <code>-v</code> が入力されたら <code>MyEcho::VERSION</code> を出力する」でもよいのですが、先程も宣言した通り <code>OptionParser</code> を導入します。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho</span><span style="color: #000000;font-weight: bold">/*</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"option_parser"&lt;/span&gt; &lt;b class="conum"&gt;(1)&lt;/b&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #aa759f"&gt;module&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #aa759f"&gt;def&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">initialize</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">STDOUT</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;      &lt;span style="color: #aa759f"&gt;property&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Bool</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">false</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">property</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;args&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">:&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Array</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">String</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;[]&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">of</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;String&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L12" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L13" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">def</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L15" class="line"&gt;      &lt;span style="color: #505050"&gt;# オプション設定を格納する&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L16" class="line"&gt;      &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L17"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L18" class="line"&gt;      &lt;span style="color: #505050"&gt;# OptionParserを用いたオプションの設定&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L19" class="line"&gt;      &lt;span style="color: #f4bf75"&gt;OptionParser&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parse</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">2</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L20"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"show version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;b class="conum"&gt;(3)&lt;/</span><span style="background-color: #f8f8f8">b</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L21" class="line"&gt;          &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">true</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L22"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L23"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">unknown_args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;unknown_args&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt; &lt;b class="conum"&gt;(4)&lt;/</span><span style="background-color: #f8f8f8">b</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L24" class="line"&gt;          &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">unknown_args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L25"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L26"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L27"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L28" class="line"&gt;      &lt;span style="color: #505050"&gt;# バージョンの表示&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L29" class="line"&gt;      &lt;span style="color: #aa759f"&gt;if&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L30"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;VERSION&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L31" class="line"&gt;        &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L32" class="line"&gt;      &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L33" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L34"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># 引数の表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L35"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L36" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L37" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L38" class="line"&gt;&lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>標準ライブラリの <code>OptionParser</code> を require します。</p>
</li>
<li>
<p><code>OptionParser#parse</code> に <code>args</code> を渡し、ブロック内でオプションを定義していきます。</p>
</li>
<li>
<p><code>OptionParser#on</code> の引数に <code>-v</code> とその説明文を、ブロックには実行したい処理を書きます。</p>
</li>
<li>
<p>オプション以外の引数は、配列になって <code>OptionParser#unknown_args</code> のブロック引数となります。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テストを回しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span>...&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>102 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>3 examples, 0 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>通りました。バイナリも作りましょう。そして、実際にバージョンを表示してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal build &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-o</span>&lt;/span&gt; ./bin/myecho ./src/cli.cr&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho foo&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>foo&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-v</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>0.1.0&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>バージョン表示ができました！CLI ツールらしくなってきました。ここまで来ると、 <code>--version</code> を指定してもバージョンを表示させたいですよね。現状だと例外が発生してしまいます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Invalid option: <span style="color: #000080">--version</span> <span style="color: #000000;font-weight: bold">(</span>OptionParser::InvalidOption<span style="color: #000000;font-weight: bold">)</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>（スタックトレースが続く ... ）&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>では対応していきましょう。まずはテストから書きます。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the version to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-v'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L9" class="line"&gt;  &lt;span style="color: #505050"&gt;# 新しいテストケース&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;  &lt;span style="color: #303030"&gt;it&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"with '--version'"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L11" class="line"&gt;    &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;IO&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Memory&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L13" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">1</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L15"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>--version</code> を指定した場合でも、バージョンが表示されることを検証しています。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テストを回すと、例外が発生しテストが落ちます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>.....E&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failures:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  1<span style="color: #000000;font-weight: bold">)</span> MyEcho MyEcho::Cli run writes the version to specified IO with <span style="color: #d14">'--version'</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>       Invalid option: <span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Error running at_exit handler: Index out of bounds&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>対応するには、 <code>OptionParser#on</code> の第二引数に <code>long_flag</code> を指定します。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"show version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;b class="conum"&gt;(1)&lt;/</span><span style="background-color: #f8f8f8">b</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L2" class="line"&gt;  &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">true</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>OptionParser#on</code> の第二引数に <code>--version</code> を指定しています。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>これでテストが通ります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span>......&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>189 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>6 examples, 0 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>実際にバージョンを表示してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal build &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-o</span>&lt;/span&gt; ./bin/myecho ./src/cli.cr&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho foo&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>foo&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-v</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>0.1.0&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>0.1.0&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>--version</code> でもバージョンを表示することができました。このように、 <code>OptionParser</code> は、コマンドラインオプションを柔軟に扱えます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ヘルプ表示のオプション-h-help-を実装する">ヘルプ表示のオプション <code>-h</code> <code>--help</code> を実装する</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次にヘルプを表示してみます。オプションの追加はバージョン表示の時と同じです。まずはテストから書きましょう。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the help to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-h'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-h"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"helpには何が表示される？"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>-h</code> を指定した場合、何が表示されるかはまだわかりません。とりあえずこのまま進みましょう。現状だと、 <code>Invalid option: -h</code> でテストが落ちることは目に見えています。まずは適当に文字列を返しましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-h"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--help"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"show help"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_help</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">true</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;  &lt;span style="color: #d0d0d0"&gt;...&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># ヘルプの表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">if</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_help</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"helpです。"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;    &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L11" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>当然、テストは失敗します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>.........F&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failures:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  1<span style="color: #000000;font-weight: bold">)</span> MyEcho MyEcho::Cli run writes the <span style="color: #0086B3">help </span>to specified IO with <span style="color: #d14">'-h'</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     Failure/Error: io.to_s.should eq <span style="color: #d14">"helpには何が表示される？"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>       Expected: <span style="color: #d14">"helpには何が表示される？"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>            got: <span style="color: #d14">"helpです。</span><span style="color: #d14">\n</span><span style="color: #d14">"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;spec/myecho_spec.cr:35&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>246 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>10 examples, 1 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L17" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failed examples:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L18" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L19" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>crystal spec spec/myecho_spec.cr:31 <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;MyEcho MyEcho::Cli run writes the &lt;span style="color: #303030"&gt;help &lt;/span&gt;to specified IO with &lt;span style="color: #90a959"&gt;'-h'&lt;/span&gt;&lt;/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ここで、 <code>OptionParser</code> の便利機能を使います。<code>OptionParser#to_s</code> で、ヘルプメッセージを返してくれます。実装してみましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># OptionParserを用いたオプションの設定&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">OptionParser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parse</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L3" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;...&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;  &lt;span style="color: #505050"&gt;# ヘルプメッセージの格納&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;  &lt;span style="color: #505050"&gt;# すべての設定を行った後で格納する&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;  &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">help_message</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L11" class="line"&gt;&lt;span style="color: #d0d0d0"&gt;...&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L12" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L13"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># ヘルプの表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">if</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_help</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L15"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">help_message</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">return</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L17"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>テストを回します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>...F&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failures:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  1<span style="color: #000000;font-weight: bold">)</span> MyEcho MyEcho::Cli run writes the <span style="color: #0086B3">help </span>to specified IO with <span style="color: #d14">'-h'</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     Failure/Error: io.to_s.should eq <span style="color: #d14">"helpには何が表示される？"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>       Expected: <span style="color: #d14">"helpには何が表示される？"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>            got: <span style="color: #d14">"    -h, --help                       show help</span><span style="color: #d14">\n</span><span style="color: #d14">    -v, --version                    show version</span><span style="color: #d14">\n</span><span style="color: #d14">"</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>     <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;spec/myecho_spec.cr:35&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>174 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>4 examples, 1 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L17" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Failed examples:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L18" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L19" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>crystal spec spec/myecho_spec.cr:31 <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;MyEcho MyEcho::Cli run writes the &lt;span style="color: #303030"&gt;help &lt;/span&gt;to specified IO with &lt;span style="color: #90a959"&gt;'-h'&lt;/span&gt;&lt;/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>それらしい文字列が返ってきました。テストを修正しましょう。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the help to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-h'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-h"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">-&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;HELP_MESSAGE&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;&lt;span style="color: #90a959"&gt;        -h, --help                       show help&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;&lt;span style="color: #90a959"&gt;        -v, --version                    show version&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L9" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #008080">HELP_MESSAGE</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>今度はテストが回りました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal spec&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span>..........&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Finished <span style="color: #000000;font-weight: bold">in </span>294 microseconds&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>10 examples, 0 failures, 0 errors, 0 pending&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ヘルプが表示されるかを build して確かめます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal build &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-o</span>&lt;/span&gt; ./bin/myecho ./src/cli.cr&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho foo&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>foo&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-h</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-h</span>, <span style="color: #000080">--help</span>                       show <span style="color: #0086B3">help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-v</span>, <span style="color: #000080">--version</span>                    show version&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-h</span>, <span style="color: #000080">--help</span>                       show <span style="color: #0086B3">help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-v</span>, <span style="color: #000080">--version</span>                    show version&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ヘルプが表示されました。しかし、もう少し体裁の整ったヘルプがよいですね。例えば、コマンドの説明や Usage などがあると良さそうです。テストを書きましょう。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the help to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-h'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-h"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">-&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;HELP_MESSAGE&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #008080">My</span> <span style="background-color: #f8f8f8">echo</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L9" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #008080">Usage</span><span style="background-color: #f8f8f8">:</span> <span style="background-color: #f8f8f8">myecho</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">options</span><span style="background-color: #f8f8f8">]</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">arguments</span><span style="background-color: #f8f8f8">]</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L12" class="line"&gt;&lt;span style="color: #90a959"&gt;        -h, --help                       show help&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L13" class="line"&gt;&lt;span style="color: #90a959"&gt;        -v, --version                    show version&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L14" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L15"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #008080">HELP_MESSAGE</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L17"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>良い感じのヘルプにしてみました。テストが通るように実装しましょう。<code>OptionParser</code> には、 <code>#banner=</code> というメソッドがあり、ヘルプメッセージに加える文字列を定義できます。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">banner</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">-&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;BANNER&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L2" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #008080">My</span> <span style="background-color: #f8f8f8">echo</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #008080">Usage</span><span style="background-color: #f8f8f8">:</span> <span style="background-color: #f8f8f8">myecho</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">options</span><span style="background-color: #f8f8f8">]</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">arguments</span><span style="background-color: #f8f8f8">]</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L6"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;&lt;span style="color: #f4bf75"&gt;  BANNER&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>これでテストを通すことができました。build して動作を確かめましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal build &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-o</span>&lt;/span&gt; ./bin/myecho ./src/cli.cr&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>My echo.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Usage: myecho <span style="color: #000000;font-weight: bold">[</span>options] <span style="color: #000000;font-weight: bold">[</span>arguments]&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-h</span>, <span style="color: #000080">--help</span>                       show <span style="color: #0086B3">help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-v</span>, <span style="color: #000080">--version</span>                    show version&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>より、ヘルプらしくなりました。<code>OptionParser</code> を使えば、このように簡単にヘルプを設定できます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prefix-を付ける-prefix-を実装する">prefix を付ける <code>--prefix</code> を実装する</h2>
<div class="sectionbody">
<div class="paragraph">
<p>もっと CLI ツールらしくするために、さらにオプションを加えましょう。各コマンド引数に prefix をつける <code>--prefix</code> オプションです。期待される動作は次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--prefix</span>&lt;/span&gt; pre_ foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>pre_foo pre_bar pre_baz&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>--prefix PREFIX</code> を指定することで、各引数の先頭に <code>PREFIX</code> を付けます。まずはテストから書きましょう。</p>
</div>
<div class="listingblock">
<div class="title">spec/myecho_spec.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"prefix specified string to each arguments"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '--prefix PREFIX'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;    &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--prefix"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"pre_"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"foo"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"bar"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"baz"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"pre_foo pre_bar pre_baz&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>このテストを通すように実装しましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr の一部</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># OptionParserを用いたオプションの設定&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L2"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">OptionParser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parse</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L3" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L4"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;...&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;parser&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--prefix PREFIX"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"prefix to each arguments"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;      &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;    &lt;span style="color: #d0d0d0"&gt;...&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L11" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L13"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L14" class="line"&gt;  &lt;span style="color: #d0d0d0"&gt;...&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L15" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L17"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">unless</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">nil</span><span style="color: #d14">?&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L18" class="line"&gt;    &lt;span style="color: #303030"&gt;@io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">map</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;{&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">}.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L19" class="line"&gt;    &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L20" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>OptionParser#on</code> は、 <code>long_flag</code> の名前だけでも指定可能です。<code>--prefix PREFIX</code> のように、オプション引数（ <code>PREFIX</code> ）を書くと、オプション引数が必須になります。また、今回の <code>--prefix</code> 定義のままで、コマンドラインから <code>--prefix=PREFIX</code> のように <code>=</code> を用いた指定も可能です。いい感じに取り扱ってくれます。</p>
</div>
<div class="paragraph">
<p>これで <code>--prefix</code> の実装も終わりました。build して動作を確認しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal build &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">-o</span>&lt;/span&gt; ./bin/myecho ./src/cli.cr&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;./bin/myecho &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--prefix</span>&lt;/span&gt; pre_ foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>pre_foo pre_bar pre_baz&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>うまく動作しているようです。</p>
</div>
<div class="paragraph">
<p>　</p>
</div>
<div class="paragraph">
<p>いかがでしたでしょうか。<code>OptionParser</code> を使っての CLI ツールの作成方法が大体つかめたでしょうか。</p>
</div>
<div class="paragraph">
<p>以下に、ここまでで紹介した <code>myecho</code> のコード全てを記載します。</p>
</div>
<div class="listingblock">
<div class="title">src/cli.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L3</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#f4bf75"&gt;MyEcho&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/span&gt;&lt;span style="color: #f4bf75"&gt;Cli&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/span&gt;&lt;span style="color: #303030"&gt;new&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/span&gt;&lt;span style="color: #303030"&gt;run&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/span&gt;&lt;span style="color: #f4bf75"&gt;ARGV&lt;/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/span&gt;&lt;/span&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/myecho.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho</span><span style="color: #000000;font-weight: bold">/*</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"option_parser"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #aa759f"&gt;module&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #aa759f"&gt;def&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">initialize</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">STDOUT</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;      &lt;span style="color: #aa759f"&gt;property&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Bool</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">false</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">property</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;args&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">:&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Array</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">String</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;[]&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">of</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;String&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L12" class="line"&gt;      &lt;span style="color: #aa759f"&gt;property&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_help</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Bool</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">false</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L13"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">property</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;help_message&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">:&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">String</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">""</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">property</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">:&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">String</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;?&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;nil&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L15" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L16" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L17"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">def</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L18" class="line"&gt;      &lt;span style="color: #505050"&gt;# オプション設定を格納する&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L19" class="line"&gt;      &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L20"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L21" class="line"&gt;      &lt;span style="color: #505050"&gt;# OptionParserを用いたオプションの設定&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L22" class="line"&gt;      &lt;span style="color: #f4bf75"&gt;OptionParser&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parse</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L23" class="line"&gt;        &lt;span style="color: #303030"&gt;parser&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">banner</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">-&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;BANNER&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L24" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L25"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #008080">My</span> <span style="background-color: #f8f8f8">echo</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L26" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L27"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #008080">Usage</span><span style="background-color: #f8f8f8">:</span> <span style="background-color: #f8f8f8">myecho</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">options</span><span style="background-color: #f8f8f8">]</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">arguments</span><span style="background-color: #f8f8f8">]</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L28"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L29" class="line"&gt;&lt;span style="color: #f4bf75"&gt;        BANNER&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L30" class="line"&gt;        &lt;span style="color: #303030"&gt;parser&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--prefix PREFIX"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"prefix to each arguments"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;|&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L31" class="line"&gt;          &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L32"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L33"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-h"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--help"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"show help"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L34"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_help</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">true</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L35"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L36"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">on</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"show version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L37"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">true</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L38"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L39"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">unknown_args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;unknown_args&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L40"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">unknown_args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L41"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L42"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># ヘルプメッセージの格納&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L43"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">help_message</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">parser</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L44"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L45"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L46" class="line"&gt;      &lt;span style="color: #505050"&gt;# ヘルプの表示&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L47" class="line"&gt;      &lt;span style="color: #aa759f"&gt;if&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_help</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L48"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">help_message</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L49"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">return</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L50"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L51"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L52" class="line"&gt;      &lt;span style="color: #505050"&gt;# バージョンの表示&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L53" class="line"&gt;      &lt;span style="color: #aa759f"&gt;if&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">display_version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L54"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyEcho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;VERSION&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L55" class="line"&gt;        &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L56" class="line"&gt;      &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L57" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L58"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># prefixをつける&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L59"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L60"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">unless</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">nil</span><span style="color: #d14">?&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L61" class="line"&gt;        &lt;span style="color: #303030"&gt;@io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">map</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;{&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">}.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L62" class="line"&gt;        &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L63" class="line"&gt;      &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L64" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L65"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># 引数の表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L66"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">@io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">print</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">args</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #8f5536"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">\</span><span style="background-color: #f8f8f8">n</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L67" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L68" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L69" class="line"&gt;&lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/myecho_spec.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./s</span><span style="background-color: #f8f8f8">pec_helper</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"./../src/myecho.cr"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #303030"&gt;describe&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L5" class="line"&gt;  &lt;span style="color: #303030"&gt;describe&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;describe&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"run"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;      &lt;span style="color: #303030"&gt;it&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"writes the content of args to specified IO with args"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;        &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;IO&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Memory&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;        &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"foo"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"bar"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L11" class="line"&gt;        &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"foo bar&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L13"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the version to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-v'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L15"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L17" class="line"&gt;          &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L18" class="line"&gt;          &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L19"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L20"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '--version'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L21"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L22"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L23" class="line"&gt;          &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">b</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"conum"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">(</span><span style="color: #009999">1</span><span style="background-color: #f8f8f8">)</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/b&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L24"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;+&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L25"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L26"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L27"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"writes the help to specified IO"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L28"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '-h'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L29"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L30"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L31" class="line"&gt;          &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-h"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L32" class="line"&gt;          &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">-&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;HELP_MESSAGE&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L33" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L34"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #008080">My</span> <span style="background-color: #f8f8f8">echo</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L35" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L36"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #008080">Usage</span><span style="background-color: #f8f8f8">:</span> <span style="background-color: #f8f8f8">myecho</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">options</span><span style="background-color: #f8f8f8">]</span> <span style="background-color: #f8f8f8">[</span><span style="background-color: #f8f8f8">arguments</span><span style="background-color: #f8f8f8">]</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L37"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L38" class="line"&gt;&lt;span style="color: #90a959"&gt;              --prefix PREFIX                  prefix to each arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L39" class="line"&gt;&lt;span style="color: #90a959"&gt;              -h, --help                       show help&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L40" class="line"&gt;&lt;span style="color: #90a959"&gt;              -v, --version                    show version&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L41" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L42"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #008080">HELP_MESSAGE</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L43"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L44"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L45"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">describe</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"prefix specified string to each arguments"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L46"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">it</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"with '--prefix PREFIX'"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L47"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">IO</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Memory</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L48"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">myecho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyEcho</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">io</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L49" class="line"&gt;          &lt;span style="color: #303030"&gt;myecho&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;([&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--prefix"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"pre_"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"foo"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"bar"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"baz"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;])&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L50" class="line"&gt;          &lt;span style="color: #303030"&gt;io&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">to_s</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;eq&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"pre_foo pre_bar pre_baz&lt;/span&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#8f5536"&gt;\n&lt;/span&gt;&lt;span style="color: #90a959"&gt;"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L51"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L52"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L53"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L54"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L55"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>次は、もう少しかゆいところに手が届く、サードパーティ製の CLI ビルダーライブラリをいくつかご紹介します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="サードパーティ製のライブラリを使う">サードパーティ製のライブラリを使う</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CLI ツールを作成するにあたって、サードパーティ製の CLI ビルダーツールを使うことは得策です。<code>OptionParser</code> よりもリッチな機能を使うことができます。例えば、 Ruby だと thor などが有名です。Crystal でも CLI ビルダーツールが作成されています。今回は主観で選択したいくつかをご紹介します。題材としては、ここまで作ってきた <code>myecho</code> を用います。</p>
</div>
<div class="sect2">
<h3 id="mrrooijencommander">mrrooijen/commander</h3>
<div class="paragraph">
<p>早い時期から作成されていたライブラリです。百聞は一見に如かず、早速 <code>myecho</code> を実装しましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho_commander.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho_commander</span><span style="color: #000000;font-weight: bold">/*</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"commander"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #303030"&gt;cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Commander&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Command&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;cmd&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">cmd</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">use</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"myecho"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L6"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">cmd</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">long</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"My echo."</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;  &lt;span style="color: #303030"&gt;cmd&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flags</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">add</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;flag&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">name</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"prefix"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">long</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--prefix"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">default</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">""</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">description</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"prefix to each arguments."</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L13"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L15" class="line"&gt;  &lt;span style="color: #303030"&gt;cmd&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flags</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">add</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;flag&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">name</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L17"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">long</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"--version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L18"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">short</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L19"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">default</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">false</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L20"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flag</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">description</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"show version."</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L21"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L22"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L23" class="line"&gt;  &lt;span style="color: #303030"&gt;cmd&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">,</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L24"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># バージョンの表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L25"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">if</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">bool</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;[&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"version"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;]&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L26" class="line"&gt;      &lt;span style="color: #303030"&gt;puts&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyechoCommander</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L27"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">next</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L28"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">end</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L29"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L30" class="line"&gt;    &lt;span style="color: #505050"&gt;# prefixをつける&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L31" class="line"&gt;    &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;=&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">string</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;[&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"prefix"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;]&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L32" class="line"&gt;    &lt;span style="color: #aa759f"&gt;unless&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">empty?</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L33"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">puts</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">map</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;{&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">}.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L34" class="line"&gt;      &lt;span style="color: #aa759f"&gt;next&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L35" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L36" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L37"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># 引数の表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L38"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">puts</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L39" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L40" class="line"&gt;&lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L41" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L42"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Commander</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">ARGV</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>サードパーティ製のライブラリは、基本的に次の構成になっています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>コマンドの説明（ <code>Description</code> や <code>Usage</code> など）</p>
</li>
<li>
<p><code>Options</code> や <code>Flags</code> の定義</p>
</li>
<li>
<p>実際に実行される箇所</p>
<div class="ulist">
<ul>
<li>
<p><code>run</code> メソッドや <code>run</code> ブロックなど</p>
</li>
<li>
<p>ここで <code>Options</code> や <code>Flags</code> の入力値を受け取れる</p>
</li>
<li>
<p>ここで 入力された引数を受け取れる</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>これらを独自の定義方法で書いていきます。<code>OotionParser</code> を用いたときよりも見やすくなっていると思います。また、 <code>help</code> や <code>version</code> など、 CLI ツールに必須のオプションはデフォルトでついている場合もあります。<code>mrrooijen/commander</code> の場合は <code>help</code> がデフォルトで設定されているので、コード上には現れていません。また、サブコマンドも実装可能です。詳しくは公式マニュアルを御覧ください。コードを実際に実行すると次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_commander.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>foo bar baz&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_commander.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>0.1.0&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_commander.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  myecho - My echo.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  Usage:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    myecho <span style="color: #000000;font-weight: bold">[</span>flags] <span style="color: #000000;font-weight: bold">[</span>arguments]&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  Commands:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #0086B3">help</span> <span style="color: #000000;font-weight: bold">[</span><span style="color: #0086B3">command</span><span style="color: #000000;font-weight: bold">]</span>  <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;Help about any command.&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  Flags:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-h</span>, <span style="color: #000080">--help</span>     <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;Help &lt;span style="color: #aa759f"&gt;for &lt;/span&gt;this command. default: &lt;span style="color: #90a959"&gt;'false'&lt;/span&gt;&lt;span style="color: #303030"&gt;.&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000080">--prefix</span>   <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;prefix to each arguments. default: &lt;span style="color: #90a959"&gt;''&lt;/span&gt;&lt;span style="color: #303030"&gt;.&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L17" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-v</span>, <span style="color: #000080">--version</span>  <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;show version. default: &lt;span style="color: #90a959"&gt;'false'&lt;/span&gt;&lt;span style="color: #303030"&gt;.&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L18" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_commander.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--prefix</span>&lt;/span&gt; pre_ foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L19" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>pre_foo pre_bar pre_baz&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>期待通りの動作をしていることがわかります。</p>
</div>
</div>
<div class="sect2">
<h3 id="jwaldripadmiral-cr">jwaldrip/admiral.cr</h3>
<div class="paragraph">
<p>最近も開発されているライブラリです。早速コードを見てみましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho_admiral.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho_admiral</span><span style="color: #000000;font-weight: bold">/*</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"admiral"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #aa759f"&gt;module&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyechoAdmiral</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Admiral&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;Command&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;define_version&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyechoAdmiral</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">VERSION</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">short: </span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;v&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L7" class="line"&gt;    &lt;span style="color: #303030"&gt;define_help&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">description: </span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"My echo."&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">,</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;short: &lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">h</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L8"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L9" class="line"&gt;    &lt;span style="color: #303030"&gt;define_flag&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;:&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">String</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;?,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L10" class="line"&gt;      &lt;span style="color: #90a959"&gt;description: &lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"prefix to each arguments."</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L11" class="line"&gt;      &lt;span style="color: #90a959"&gt;long: &lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L13" class="line"&gt;    &lt;span style="color: #aa759f"&gt;def&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># prefixをつける&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L15"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">flags</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L16"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">unless</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">nil</span><span style="color: #d14">?&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L17" class="line"&gt;        &lt;span style="color: #303030"&gt;puts&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">arguments</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">map</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;{&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arg&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">}.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L18" class="line"&gt;        &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L19" class="line"&gt;      &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L20" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L21"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># 引数の表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L22"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">puts</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L23" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L24" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L25" class="line"&gt;&lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L26" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L27"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyechoAdmiral</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>行数が少ないですね。<code>help</code> と <code>version</code> はマクロで1行で書かれています。こういった DSL を提供しやすいのもマクロの強みです。構造もわかりやすく、読みやすいと思います。もちろん、サブコマンドも対応しています。</p>
</div>
<div class="paragraph">
<p>実際に実行すると次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_admiral.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>foo bar baz&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_admiral.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>0.1.0&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_admiral.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Usage:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  myecho <span style="color: #000000;font-weight: bold">[</span>flags...] <span style="color: #000000;font-weight: bold">[</span>arg...]&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>My echo.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>Flags:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000080">--help</span>, <span style="color: #000080">-h</span> <span style="color: #000000;font-weight: bold">(</span>default: <span style="color: #0086B3">false</span><span style="color: #000000;font-weight: bold">)</span>     <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;Displays &lt;span style="color: #303030"&gt;help &lt;/span&gt;&lt;span style="color: #aa759f"&gt;for &lt;/span&gt;the current command.&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000080">--prefix</span>                        <span style="color: #999988;font-style: italic">#&lt;/span&gt;&lt;span style="color: #303030"&gt; &lt;/span&gt;prefix to each arguments.&lt;/span&gt;</span>
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000080">--version</span>, <span style="color: #000080">-v</span> <span style="color: #000000;font-weight: bold">(</span>default: <span style="color: #0086B3">false</span><span style="color: #000000;font-weight: bold">)</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_admiral.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--prefix</span>&lt;/span&gt; pre_ foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>pre_foo pre_bar pre_baz&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>こちらも期待通りの動作をしています。</p>
</div>
</div>
<div class="sect2">
<h3 id="at-grandpaclim">at-grandpa/clim</h3>
<div class="paragraph">
<p>これは私自身が作成したライブラリです。記述量の少なさと直感的な記述を目的に作成しています。コードを見てみましょう。</p>
</div>
<div class="listingblock">
<div class="title">src/myecho_clim.cr</div>
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="crystal"><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L1"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">require</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"./m</span><span style="background-color: #f8f8f8">yecho_clim</span><span style="color: #000000;font-weight: bold">/*</span><span style="color: #d14">"&lt;/span&gt;&lt;/span&gt;
&lt;span id="</span><span style="color: #008080">L2</span><span style="color: #d14">" class="</span><span style="background-color: #f8f8f8">line</span><span style="color: #d14">"&gt;&lt;span style="</span><span style="color: #990073">color: </span><span style="color: #999988;font-style: italic">#303030"&gt;require&lt;/span&gt; &lt;span style="color: #90a959"&gt;"clim"&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L3"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L4" class="line"&gt;&lt;span style="color: #aa759f"&gt;module&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyechoClim</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L5"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>  <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Cli&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;&amp;</span><span style="background-color: #f8f8f8">lt</span><span style="background-color: #f8f8f8">;</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;Clim&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L6" class="line"&gt;    &lt;span style="color: #303030"&gt;main_command&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">do</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L7"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">desc</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"My echo."&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L8" class="line"&gt;      &lt;span style="color: #303030"&gt;usage&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"myecho [options] [arguments] ..."</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L9"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">option</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;"--prefix PREFIX"&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">,</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;type: &lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">String</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;,&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #990073">desc: </span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #90a959"&gt;"prefix to each arguments."&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">,</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;default: &lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">""</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L10"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">version</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #f4bf75"&gt;MyechoClim&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;::&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #f4bf75"&gt;VERSION&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">,</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #90a959"&gt;short: &lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">"-v"</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L11"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>      <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">run</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #aa759f"&gt;do&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;options&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">,</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L12"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># prefixをつける&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L13"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;=&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">prefix</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L14"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #aa759f"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000000;font-weight: bold">unless</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">empty?</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L15"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>          <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">puts</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">map</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #d0d0d0"&gt;{&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #303030"&gt;argument&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;|&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;prefix&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;+&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;argument&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">}.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L16" class="line"&gt;          &lt;span style="color: #aa759f"&gt;return&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L17" class="line"&gt;        &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L18" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L19"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #505050"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #999988;font-style: italic"># 引数の表示&lt;/span&gt;&lt;/span&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L20"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;</span>        <span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #0086B3">puts</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt; &lt;span style="color: #303030"&gt;arguments&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #d0d0d0"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">.</span><span style="color: #990000;font-weight: bold">&lt;</span><span style="color: #000000;font-weight: bold">/</span><span style="background-color: #f8f8f8">span</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">join</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #90a959"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #d14">" "</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L21" class="line"&gt;      &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L22" class="line"&gt;    &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L23" class="line"&gt;  &lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L24" class="line"&gt;&lt;span style="color: #aa759f"&gt;end&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;
&lt;span id="L25" class="line"&gt;&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;</span>
<span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="color: #0086B3">id</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"L26"</span> <span style="color: #000000;font-weight: bold">class</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"line"</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">MyechoClim</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;::&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">Cli</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;.&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="background-color: #f8f8f8">start</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;(&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="background-color: #f8f8f8">span</span> <span style="background-color: #f8f8f8">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">ARGV</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #009926">/span&gt;&lt;span style="color: #d0d0d0"&gt;)&lt;/s</span><span style="background-color: #f8f8f8">pan</span><span style="color: #000000;font-weight: bold">&gt;&lt;</span><span style="color: #009926">/span&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>desc</code> や <code>option</code> などの定義が１行で書けます。<code>version</code> マクロも用意しました。コマンドの実行箇所は、 <code>run</code> ブロックになります。サブコマンドも対応しており、直感的に記述することができます。詳しくはマニュアルを御覧ください。</p>
</div>
<div class="paragraph">
<p>実際に実行すると次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap" style="background-color: #f8f8f8"><code data-lang="console"><span style="color: #555555">&lt;span id="L1" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_clim.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L2" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>foo bar baz&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L3" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_clim.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--version</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L4" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>0.1.0&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L5" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_clim.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--help</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L6" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L7" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  My echo.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L8" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L9" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  Usage:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L10" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L11" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    myecho <span style="color: #000000;font-weight: bold">[</span>options] <span style="color: #000000;font-weight: bold">[</span>arguments] ...&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L12" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L13" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>  Options:&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L14" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L15" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">--prefix</span> PREFIX                  prefix to each arguments. <span style="color: #000000;font-weight: bold">[</span><span style="color: #0086B3">type</span>:String] <span style="color: #000000;font-weight: bold">[</span>default:<span style="color: #d14">""</span><span style="color: #000000;font-weight: bold">]</span>&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L16" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">--help</span>                           Show this help.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L17" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>    <span style="color: #000080">-v</span>, <span style="color: #000080">--version</span>                    Show version.&lt;/span&gt;&lt;/span&gt;
<span style="color: #555555">&lt;span id="L18" class="line"&gt;</span>&lt;/span&gt;
<span style="color: #555555">&lt;span id="L19" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #008080">$&lt;</span>/span&gt;&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span> &lt;/span&gt;crystal run src/myecho_clim.cr &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--</span>&lt;/span&gt; &lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #f4bf75"</span><span style="color: #000000;font-weight: bold">&gt;</span><span style="color: #000080">--prefix</span>&lt;/span&gt; pre_ foo bar baz&lt;/span&gt;
<span style="color: #555555">&lt;span id="L20" class="line"&gt;</span>&lt;span <span style="color: #008080">style</span><span style="color: #000000;font-weight: bold">=</span><span style="color: #d14">"color: #303030"</span><span style="color: #000000;font-weight: bold">&gt;</span>pre_foo pre_bar pre_baz&lt;/span&gt;&lt;/span&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>こちらも期待通りの動作をしています。</p>
</div>
<div class="paragraph">
<p>　</p>
</div>
<div class="paragraph">
<p>サードパーティ製のライブラリはそれぞれに特徴がありますが、デフォルトの <code>OptionParser</code> よりはリッチな機能を提供してくれます。個人で使う小さな CLI ツールだと <code>OptionParser</code> で十分かもしれません。しかし、ツールとして公開したりメンテナンスが必要になってくるケースでは、サードパーティ製ライブラリを使うほうが良いかと思います。ぜひ一度試してみてください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="まとめ">まとめ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この章では Crystal で CLI ツールの開発を行うことについて説明しました。冒頭に説明した通り、利点は次のようになるでしょう。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>コンパイルしてワンバイナリにできる</p>
</li>
<li>
<p>Ruby 風の syntax で雑に書ける</p>
</li>
<li>
<p>実行速度が早い</p>
</li>
<li>
<p>コンパイル時に型チェックが入る</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ものすごく雑に小さい CLI ツールを作成する場合は、コンパイルがある分、 Crystal よりも Ruby の方が速いでしょう。しかし、中規模程度でコード量が多くてメンテナンスが必要になってくるケースだと、 Crystal の利点は大きくなってくるのではないでしょうか。大規模なバッチ処理などでも、処理スピードやメモリ使用量などで Crysal の力が発揮されると思います。</p>
</div>
<div class="paragraph">
<p>みなさんも一度、 敷居の低い CLI ツールを通して Crystal に触れてみてください。</p>
</div>
</div>
</div></div>
	</article>
</div><!-- Footer -->
<div id="footer">
  
  <!-- Copyright -->
  <ul class="copyright">
    
      <li>&copy;Introducing Crystal Programming Language. All rights reserved.</li>
    
    <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    <li>Jekyll integration: <a href="https://chrisbobbe.github.io/">Chris Bobbe</a></li>
  </ul>
  
</div></body>
</html>